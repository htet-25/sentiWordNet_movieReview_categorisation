<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/common/standardLayout.xhtml">
	<ui:define name="content">
		<div id="dashboard" ng-app="anti-criminal">
			<div ng-controller="DashboardCtrl">
				<!-- Search Accordion Panel -->
				<div class="accordion">
					<i class="fa fa-search"></i> <h:outputText value="#{label['DASHBOARD_SEARCH_PANEL']}" />
				</div>
				<div class="panel">
					<form>
						<div id="reportSearchForm" class="ui-panelgrid ui-widget">
							<div id="reportSearchContent"
								class="ui-panelgrid-content ui-widget-content ui-grid ui-grid-responsive">
								<div class="ui-grid-row">
									<div class="ui-panelgrid-cell width-20 ui-grid-col-3">
										<label id="name" class="ui-outputlabel ui-widget"><h:outputText value="#{label['DASHBOARD_NAME']}" /></label>
									</div>
									<div class="ui-panelgrid-cell width-25 ui-grid-col-3">
										<input id="name" type="text" ng-model="reportSearchDto.name"
											class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all width-100"
											role="textbox" aria-disabled="false" aria-readonly="false" />
									</div>

									<div class="ui-panelgrid-cell width-20 ui-grid-col-3">
										<label id="message" class="ui-outputlabel ui-widget"><h:outputText value="#{label['DASHBOARD_MESSAGE']}" /></label>
									</div>
									<div class="ui-panelgrid-cell width-35 ui-grid-col-3">
										<input id="message" type="text"
											ng-model="reportSearchDto.message"
											class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all width-67"
											role="textbox" aria-disabled="false" aria-readonly="false" />
									</div>
								</div>
								<div class="ui-grid-row">
									<div class="ui-panelgrid-cell width-20 ui-grid-col-3">
										<label id="fromDate" class="ui-outputlabel ui-widget"><h:outputText value="#{label['DASHBOARD_FROM_DATE']}" /></label>
									</div>
									<div class="ui-panelgrid-cell width-25 ui-grid-col-3">
										<p:calendar id="fromDate" widgetVar="fromDate"
											navigator="true" pattern="dd/MM/yyyy" maxlength="10"
											styleClass="date-width-100" />
									</div>

									<div class="ui-panelgrid-cell width-20 ui-grid-col-3">
										<label id="toDate" class="ui-outputlabel ui-widget"><h:outputText value="#{label['DASHBOARD_TO_DATE']}" /></label>
									</div>
									<div class="ui-panelgrid-cell width-35 ui-grid-col-3">
										<p:calendar id="toDate" widgetVar="toDate" navigator="true"
											pattern="dd/MM/yyyy" maxlength="10"
											styleClass="date-width-67" />
									</div>
								</div>
								<div class="ui-grid-row">
									<div class="ui-panelgrid-cell width-20 ui-grid-col-3">
										<label id="wantedNoticeId" class="ui-outputlabel ui-widget"><h:outputText value="#{label['DASHBOARD_WANTED_NOTICE_ID']}" /></label>
									</div>
									<div class="ui-panelgrid-cell width-25 ui-grid-col-3">
										<input ng-model="reportSearchDto.wantedNoticeId" type="text"
											class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all width-100"
											role="textbox" aria-disabled="false" aria-readonly="false" />
									</div>
								</div>
								<div class="ui-grid-row">
									<div class="ui-panelgrid-cell width-20 ui-grid-col-3">
										<label class="ui-outputlabel ui-widget"></label>
									</div>
									<div class="ui-panelgrid-cell width-25 ui-grid-col-3">
										<button ng-click="reportSearch()"
											class="custom-button"
											role="button" aria-disabled="false">
											<span class="ui-button-text ui-c"><h:outputText value="#{label['DASHBOARD_SEARCH_BUTTON']}" /></span>
										</button>
									</div>
									<div class="ui-panelgrid-cell width-20 ui-grid-col-3">
										<label class="ui-outputlabel ui-widget"></label>
									</div>
									<div class="ui-panelgrid-cell width-35 ui-grid-col-3">
										<label class="ui-outputlabel ui-widget"></label>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>

				<div class="alert alert-info" role="alert" ng-if="doSearch">
					<strong><h:outputText value="#{label['DASHBOARD_REPORT_SEARCH_INFO']}" /></strong>
				</div>

				<!-- Nav tabs -->
				<ul class="tabs-menu" role="tablist">
					<li role="presentation" class="current" ng-click="getReportType(4)"><a
						href="#all" aria-controls="all" role="tab" data-toggle="tab"><h:outputText value="#{label['DASHBOARD_REPORT_ALL']}" /></a></li>
					<li role="presentation" ng-click="getReportType(0)"><a
						href="#normal" aria-controls="normal" role="tab" data-toggle="tab"><h:outputText value="#{label['DASHBOARD_REPORT_NORMAL']}" /></a></li>
					<li role="presentation" ng-click="getReportType(1)"><a
						href="#wantedReply" aria-controls="wantedReply" role="tab"
						data-toggle="tab"><h:outputText value="#{label['DASHBOARD_REPORT_WANTED_REPLY']}" /></a></li>
					<li role="presentation" ng-click="getReportType(2)"><a
						href="#emergency" aria-controls="emergency" role="tab"
						data-toggle="tab"><h:outputText value="#{label['DASHBOARD_REPORT_EMERGENCY']}" /></a></li>
					<li role="presentation" ng-click="getReportType(3)"><a
						href="#suspicious" aria-controls="suspicious" role="tab"
						data-toggle="tab"><h:outputText value="#{label['DASHBOARD_REPORT_SUSPICIOUS']}" /></a></li>
					
					<div style="margin-right: 10px; float: right;">
						<button ng-click="syncReport()" 
							class="custom-button"
							role="button" aria-disabled="false">
							<span class="ui-button-icon-left fa fa-refresh"></span>
							<span ><h:outputText value="#{label['DASHBOARD_REPORT_SYNC_BUTTON']}" /></span>
						</button>
					</div>
				</ul>

				<!-- Tab panes -->
				<div class="tab"> 
					<div role="tabpanel" class="tab-content" id="all">
						<div class="report_info_tab">
							<div class="animated fadeInUp">
								<div class="report_info animated fadeInUp"
									data-ng-repeat="all in allList">
									<div class="report_item" ng-click="goReportDetail(all)">
										<div class="report_photo_border">
											<img
												ng-hide="{{all.reportAttachmentList[0].smallPath == '' || all.reportAttachmentList[0].smallPath == null}}"
												src="#{request.contextPath}{{all.reportAttachmentList[0].smallPath}}"
												class="report_photo"></img>
										</div>
										<img src="/anti-criminal/images/video-play-icon.png"
											class="play_button"
											ng-show="{{all.reportAttachmentList[0].type == 'mp4'}}"></img>
										<div>
											<span class="report_name">
												<span ng-hide="{{all.name == '' || all.name == null}}">{{all.name}}</span>
												<span class="report_date">{{all.reportedDate | date:'yyyy-MM-dd HH:mm a'}}</span> 
											</span> 
											<span class="report_description">{{all.message | limitTo:400}}</span>
										</div>
									</div>
									<div class="divider"></div>
								</div>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-content" id="normal">
						<div class="report_info_tab">
							<div class="animated fadeInUp">
								<div class="report_info animated fadeInUp"
									data-ng-repeat="normal in normalList">
									<div class="report_item" ng-click="goReportDetail(normal)">
										<div class="report_photo_border">
											<img
												ng-hide="{{normal.reportAttachmentList[0].smallPath == '' || normal.reportAttachmentList[0].smallPath == null}}"
												src="#{request.contextPath}{{normal.reportAttachmentList[0].smallPath}}"
												class="report_photo"></img>
										</div>
										<img src="/anti-criminal/images/video-play-icon.png"
											class="play_button"
											ng-show="{{normal.reportAttachmentList[0].type == 'mp4'}}"></img>
										<div>
											<span class="report_name"><span
												ng-hide="{{normal.name == '' || normal.name == null}}">{{normal.name}}</span> <span
												class="report_date">{{normal.reportedDate |
													date:'yyyy-MM-dd HH:mm a'}}</span> </span> <span
												class="report_description">{{normal.message | limitTo:400}}</span>
										</div>
									</div>
									<div class="divider"></div>
								</div>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-content" id="wantedReply">
						<div class="report_info_tab">
							<div class="animated fadeInUp">
								<div class="report_info animated fadeInUp"
									data-ng-repeat="wanted in wantedList">
									<div class="report_item" ng-click="goReportDetail(wanted)">
										<div class="report_photo_border">
											<img
												ng-hide="{{wanted.reportAttachmentList[0].smallPath == '' || wanted.reportAttachmentList[0].smallPath == null}}"
												src="#{request.contextPath}{{wanted.reportAttachmentList[0].smallPath}}"
												class="report_photo"></img>
										</div>
										<img src="/anti-criminal/images/video-play-icon.png"
											class="play_button"
											ng-show="{{wanted.reportAttachmentList[0].type == 'mp4'}}"></img>
										<div>
											<span class="report_name"><span
												ng-hide="{{wanted.name == '' || wanted.name == null}}"
												>{{wanted.name}}</span> <span
												class="report_date">{{wanted.reportedDate |
													date:'yyyy-MM-dd HH:mm a'}}</span> </span> <span
												class="report_description">{{wanted.message | limitTo:400}}</span>
										</div>
									</div>
									<div class="divider"></div>
								</div>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-content" id="emergency">
						<div class="report_info_tab">
							<div class="animated fadeInUp">
								<div class="report_info animated fadeInUp"
									data-ng-repeat="emergency in emergencyList">
									<div class="report_item" ng-click="goReportDetail(emergency)">
										<div class="report_photo_border">
											<img
												ng-hide="{{emergency.reportAttachmentList[0].smallPath == '' || emergency.reportAttachmentList[0].smallPath == null}}"
												src="#{request.contextPath}{{emergency.reportAttachmentList[0].smallPath}}"
												class="report_photo"></img>
										</div>
										<img src="/anti-criminal/images/video-play-icon.png"
											class="play_button"
											ng-show="{{emergency.reportAttachmentList[0].type == 'mp4'}}"></img>
										<div>
											<span class="report_name"><span
												ng-hide="{{emergency.name == '' || emergency.name == null}}"
												>{{emergency.name}}</span> <span
												class="report_date">{{emergency.reportedDate |
													date:'yyyy-MM-dd HH:mm a'}}</span> </span> <span
												class="report_description">{{emergency.message | limitTo:400}}</span>
										</div>
									</div>
									<div class="divider"></div>
								</div>
							</div>
						</div>
					</div>
					<div role="tabpanel" class="tab-content" id="suspicious">
						<div class="report_info_tab">
							<div class="animated fadeInUp">
								<div class="report_info animated fadeInUp"
									data-ng-repeat="suspicious in suspiciousList">
									<div class="report_item" ng-click="goReportDetail(suspicious)">
										<div class="report_photo_border">
											<img
												ng-hide="{{suspicious.reportAttachmentList[0].smallPath == '' || suspicious.reportAttachmentList[0].smallPath == null}}"
												src="#{request.contextPath}{{suspicious.reportAttachmentList[0].smallPath}}"
												class="report_photo"></img>
										</div>
										<img src="/anti-criminal/images/video-play-icon.png"
											class="play_button"
											ng-show="{{suspicious.reportAttachmentList[0].type == 'mp4'}}"></img>
										<div>
											<span class="report_name"><span
												ng-hide="{{suspicious.name == '' || suspicious.name == null}}"
												>{{suspicious.name}}</span> <span
												class="report_date">{{suspicious.reportedDate |
													date:'yyyy-MM-dd HH:mm a'}}</span> </span> <span
												class="report_description">{{suspicious.message | limitTo:400}}</span>
										</div>
									</div>
									<div class="divider"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- Scroll Top -->
		<div id="scrollTop">
			<img src="#{request.contextPath}/images/arrow_up.png"></img>
		</div>
	</ui:define>
</ui:composition>