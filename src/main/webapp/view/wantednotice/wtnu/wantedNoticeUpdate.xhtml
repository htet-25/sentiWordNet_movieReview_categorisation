<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/common/commonLayout.xhtml">
	<ui:define name="content">
		<h:form id="wantedNoticeUpdateForm" enctype="multipart/form-data">
			<h1><h:outputText value="#{label['WANTED_NOTICE_UPDATE_TITLE']}" /></h1>
			<p:messages globalOnly="true" showDetail="false" showSummary="true" />
			 <c:if test="#{wantedNoticeUpdateActionBean.wantedNoticeDto ne null}">
				<p:panelGrid columns="2" columnClasses="width-20, width-80"
					layout="grid">

					<p:outputLabel for="wantedPersonId" value="#{label['WANTED_NOTICE_UPDATE_ID']}" />
					<h:outputText id="wantedPersonId" styleClass="width-30"
						value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.wantedPersonId}" />


					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_CASE_NO']}" />
					<h:panelGroup>
						<p:autoComplete id="caseNo" maxlength="10"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.caseNo}"
							completeMethod="#{wantedNoticeUpdateActionBean.getAllCaseNo}" scrollHeight="250" styleClass="auto-complete-100">
							<f:validateLength maximum="10" />
						</p:autoComplete>
						<p:message for="caseNo" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_NAME']}" styleClass="required" />
					<h:panelGroup>
						<p:inputText id="name" styleClass="width-30"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.nameEn}"
							maxlength="50" required="true">
							<f:validateLength maximum="50" />
						</p:inputText>
						<p:message for="name" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_NRC_NO']}" />
					<h:panelGroup>
						<p:inputText id="nrcNo" styleClass="width-30"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.nrcNoEn}"
							maxlength="22">
							<f:validateLength maximum="22" />
						</p:inputText>
						<p:spacer width="10" />
						<h:outputText styleClass="input-label"
							value="(Eg : 12/TaMaNa(N)119933)" />
						<p:message for="nrcNo" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_FATHER_NAME']}" />
					<h:panelGroup>
						<p:inputText id="fatherName" styleClass="width-30"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.fatherNameEn}"
							maxlength="50">
							<f:validateLength maximum="50" />
						</p:inputText>
						<p:message for="fatherName" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_DATE_OF_BIRTH']}" />
					<h:panelGroup>
						<p:calendar id="dateOfBirth" pattern="dd/MM/yyyy"
							styleClass="date-width-30" navigator="true"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.dateOfBirth}" />
						<p:message for="dateOfBirth" />
					</h:panelGroup>


					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_GENDER']}" styleClass="required" />
					<h:panelGroup>
						<p:selectOneMenu id="gender"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.gender}"
							required="true">
							<f:selectItem itemLabel="#{label['WANTED_NOTICE_UPDATE_GENDER_SELECT']}" itemValue="" />
							<f:selectItems value="#{wantedNoticeUpdateActionBean.genderList}"
								var="gender" itemLabel="#{gender.label}"
								itemValue="#{gender.value}" />
						</p:selectOneMenu>
						<p:message for="gender" />
					</h:panelGroup>


					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_MARITAL_STATUS']}" />
					<p:selectOneMenu id="maritalStatus"
						value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.maritalStatus}">
						<f:selectItem itemLabel="#{label['WANTED_NOTICE_UPDATE_MARITAL_STATUS_SELECT']}" itemValue="" />
						<f:selectItems
							value="#{wantedNoticeUpdateActionBean.maritalStatusList}"
							var="maritalStatus" itemLabel="#{maritalStatus.label}"
							itemValue="#{maritalStatus.value}" />
					</p:selectOneMenu>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_MESSAGE']}" styleClass="required" />
					<h:panelGroup>
						<p:inputTextarea id="message" rows="5" cols="25" label="Message"
							autoResize="false"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.messageEn}"
							maxlength="2000" required="true"
							styleClass="width-80 text-area-noresize">
							<f:validateLength maximum="2000" />
						</p:inputTextarea>
						<p:message for="message" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_WEIGHT']}" />
					<h:panelGroup>
						<p:inputText id="weight" styleClass="width-30"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.weight}"
							maxlength="6">
							<f:validateLength maximum="6" />
							<f:validator validatorId="weightValidator" />
						</p:inputText>
						<p:message for="weight" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_HEIGHT']}" />

					<h:panelGroup>
						<p:inputText id="feet" styleClass="width-12"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.feet}"
							maxlength="3">
							<f:validateLength maximum="3" />
							<f:validateLongRange maximum="82" minimum="1" />
						</p:inputText>
						<p:spacer width="10" />
						<h:outputText value="#{label['WANTED_NOTICE_UPDATE_FEET']}" />
						<p:spacer width="20" />

						<p:inputText id="inches" styleClass="width-12"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.inches}"
							maxlength="2">
							<f:validateLength maximum="2" />
							<f:validateLongRange maximum="12" minimum="1"/>
						</p:inputText>
						<p:spacer width="10" />
						<h:outputLabel value="#{label['WANTED_NOTICE_UPDATE_INCHES']}" />
					</h:panelGroup>

					<p:outputLabel />
					<h:panelGroup>
						<p:message for="feet" />
						<p:message for="inches" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_RACE']}" />
					<h:panelGroup>
						<p:inputText id="race" styleClass="width-30"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.raceEn}"
							maxlength="25">
							<f:validateLength maximum="25" />
						</p:inputText>
						<p:message for="race" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_RELIGION']}" />
					<h:panelGroup>
						<p:inputText id="religion" styleClass="width-30"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.religionEn}"
							maxlength="25">
							<f:validateLength maximum="25" />
						</p:inputText>
						<p:message for="religion" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_NATIONALITY']}" />
					<h:panelGroup>
						<p:inputText id="nationality" styleClass="width-30"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.nationalityEn}"
							maxlength="25">
							<f:validateLength maximum="25" />
						</p:inputText>
						<p:message for="nationality" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_PHONE_NO']}" />
					<h:panelGroup>
						<p:inputText id="phoneNo" styleClass="width-30"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.phoneNo}"
							maxlength="50">
							<f:validateLength maximum="50" />
						</p:inputText>
						<p:message for="phoneNo" />
					</h:panelGroup>
					
					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_ADDRESS']}" />
					<h:panelGroup>
						<p:inputTextarea id="address" rows="3" cols="50" label="Address"
							autoResize="false"
							value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.addressEn}"
							maxlength="255" styleClass="width-80 text-area-noresize">
							<f:validateLength maximum="255" />
						</p:inputTextarea>
						<p:message for="address" />
					</h:panelGroup>

					<p:outputLabel value="#{label['WANTED_NOTICE_UPDATE_ATTACHMENT_FILE']}" styleClass="required" />
					<h:panelGroup>
						<input type="hidden" value="#{flash.keep.wantedId}" />
						<p:fileUpload id="attachmentFile" mode="advanced"
							dragDropSupport="true"
							fileUploadListener="#{wantedNoticeUpdateActionBean.handleFileUpload}"
							multiple="true" sizeLimit="5242880"
							allowTypes="/(\.)(jpg|jpeg|png|JPG|JPEG|PNG)$/"
							label="#{label['WANTED_NOTICE_UPDATE_CHOOSE']}"
							uploadLabel="#{label['WANTED_NOTICE_UPDATE_UPLOAD']}"
							cancelLabel="#{label['WANTED_NOTICE_UPDATE_CANCEL']}"
							update=":wantedNoticeUpdateForm:attachmentGrid" styleClass="width-80" />
					</h:panelGroup>

					<p:outputLabel />
					<h:panelGroup id="attachmentGrid">
						<input type="hidden" value="#{flash.keep.wantedId}" />
						<c:if
							test="#{not empty wantedNoticeUpdateActionBean.wantedNoticeDto.wantedAttachmentList}">
							<p:dataGrid columns="4" layout="grid"
								value="#{wantedNoticeUpdateActionBean.wantedNoticeDto.wantedAttachmentList}"
								var="wantedAttachmentDto" rowIndexVar="imageIndex">
								<p:commandLink
									actionListener="#{wantedNoticeUpdateActionBean.deleteFileAttachment(wantedAttachmentDto)}"
									immediate="true" styleClass="link-remove"
									update=":wantedNoticeUpdateForm:attachmentGrid">
									<p:graphicImage styleClass="img-remove"
										url="/images/Remove.png" />
								</p:commandLink>

								<p:commandLink id="image" oncomplete="PF('imageDialog').show()"
									update=":imageDialogForm" immediate="true"
									actionListener="#{wantedNoticeUpdateActionBean.openDialog(wantedAttachmentDto, imageIndex)}">
									<p:graphicImage width="100px" height="100px"
										value="#{wantedAttachmentDto.path}" />
								</p:commandLink>
							</p:dataGrid>
						</c:if>
					</h:panelGroup>
				</p:panelGrid>
			</c:if>

			<p:panelGrid columns="2" columnClasses="width-20, width-80"
				layout="grid">
				<p:outputLabel />
				<h:panelGroup>
					<input type="hidden" value="#{flash.keep.wantedId}" />
					<p:commandButton id="update" value="#{label['WANTED_NOTICE_UPDATE_UPDATE']}"
						update="wantedNoticeUpdateForm"
						action="#{wantedNoticeUpdateActionBean.update()}"
						rendered="#{wantedNoticeUpdateActionBean.wantedNoticeDto ne null}" />
					<p:spacer width="5" />
					<p:commandButton id="reset" value="#{label['WANTED_NOTICE_UPDATE_RESET']}" immediate="true"
						update="wantedNoticeUpdateForm"
						action="#{wantedNoticeUpdateActionBean.reset()}"
						rendered="#{wantedNoticeUpdateActionBean.wantedNoticeDto ne null}">
						<p:resetInput target="@form" />
					</p:commandButton>
					<p:spacer width="5" />
					<p:commandButton id="back" value="#{label['WANTED_NOTICE_UPDATE_BACK']}" action="wantedNoticeSearch" />
				</h:panelGroup>
			</p:panelGrid>
		</h:form>
		<h:form id="imageDialogForm">
			<p:dialog widgetVar="imageDialog" id="imageDialog" resizable="false"
				draggable="false" width="100%" height="100%"
				style="top:0px;bottom:0px; background: rgba(0, 0, 0, .9);"
				header="#{wantedNoticeUpdateActionBean.fileName}">
				<input type="hidden" value="#{flash.keep.wantedId}" />
				<div style="text-align: center;">
					<p:graphicImage value="#{wantedNoticeUpdateActionBean.path}"
						styleClass="img" />
				</div>
				<div class="arrow">
					<p:commandLink id="previous"
						oncomplete="PF('imageDialog').show()" update=":imageDialogForm"
						actionListener="#{wantedNoticeUpdateActionBean.showPreviousPhoto()}">
						<img src="/anti-criminal/images/previous.png" />
					</p:commandLink>
					<p:commandLink id="next" oncomplete="PF('imageDialog').show()"
						update=":imageDialogForm"
						actionListener="#{wantedNoticeUpdateActionBean.showNextPhoto()}">
						<img src="/anti-criminal/images/next.png"/>
					</p:commandLink>
				</div>
			</p:dialog>
		</h:form>
	</ui:define>
</ui:composition>